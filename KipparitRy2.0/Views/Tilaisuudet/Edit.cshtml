<div class="margin">
    @model KipparitRy2._0.Models.Tilaisuudet

    @{
        ViewBag.Title = "Edit";
    }

    <style>
        .field-validation-valid {
            display: none;
        }

        .validation-summary-valid {
            display: none;
        }
    </style>

    <link href="~/Content/jquery.datetimepicker.css" rel="stylesheet" />

    @section scripts {
        <script src="/jquery.js"></script>
        <script src="~/Scripts/jquery.datetimepicker.js"></script>
        <script>
        @**$('#Pvm').datetimepicker({ footer: true, modal: false, format: 'dd.mm.yyyy HH:MM', uiLibrary: 'bootstrap4' });*@
            $('.datetimepicker').datetimepicker({
                minDate: getFormattedDate(new Date())
            });

            function getFormattedDate(date) {
                var day = date.getDate();
                var month = date.getMonth() + 1;
                var year = date.getFullYear().toString().slice(2);
                return day + '-' + month + '-' + year;
            }
        </script>
    }

    <h2>Muokkaa</h2>


    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        <div class="form-horizontal">
            <hr />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            @Html.HiddenFor(model => model.TilaisuusID)

            <div class="form-group">
                @Html.LabelFor(model => model.Nimi, "Tilaisuus", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Nimi, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Nimi, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Jarjestaja, "Järjestäjä", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.DropDownList("Jarjestaja", null, htmlAttributes: new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.Jarjestaja, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Pvm, "Päivämäärä", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Pvm, new { htmlAttributes = new { @class = "datetimepicker" } })
                    @Html.ValidationMessageFor(model => model.Pvm, "Tuntematon päivämäärä.", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.MaxMaara, "Max osallistujat", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.MaxMaara, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.MaxMaara, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Tallenna" class="btn btn-success" />
                </div>
            </div>
        </div>
    }

    <div>
        <p><a class="btn btn-primary" href="~/Tilaisuudet/">Takaisin listaan</a></p>
    </div>
</div>